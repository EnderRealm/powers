---
id: p-438d
status: closed
deps: [p-88d1]
links: []
created: 2026-02-08T20:05:48Z
type: task
priority: 2
assignee: Steve Macbeth
parent: p-2f2f
---
# Add PreCompact prompt hook to Powers

Register a PreCompact prompt hook that creates a structured session summary with sentinel markers

## Design

Files: hooks/hooks.json (modify existing)
Add PreCompact entry to hooks.json with type: prompt.
Prompt includes:
  - Redaction instruction (no secrets/keys/PII, use [REDACTED])
  - Sentinel markers: <!-- BEGIN_SESSION_SUMMARY --> / <!-- END_SESSION_SUMMARY -->
  - Sections: Ticket(s), Overview, Decisions (auto/human tags), Problems (resolved/unresolved), Discoveries, Incomplete Work
  - timeout: 120
See docs/LEARNING-EXTRACTION-DESIGN.md Hook Configuration section for exact prompt text.

## Acceptance Criteria

PreCompact hook registered in hooks.json, prompt matches design doc specification

